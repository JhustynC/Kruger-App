<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
</head>

<body>
  <h1>Bienvenido <%= displayName %>
  </h1>
  <p>Tu esta registrado como administrador.</p>

  <!-- Botones para las opciones de clientes -->
  <button><a href="/admin/dashboard?clientOptions=true">Clients</a></button>
  <button><a href="/admin/dashboard?sectorOptions=true">Sectors</a></button>
  <button><a href="/admin/dashboard?interruptionOptions=true">Interruptions</a></button>
  <form action="/auth/logout" method="GET">
    <button type="submit">Log out</button>
  </form>

  <!-- Contenido dinámico -->
  <div class="client-options">
    <% if (clientOptions==='true' ) { %>
      <h2>Gestion de Clientes</h2>
      <button><a href="/admin/dashboard?createClientForm=true">Crear Cliente</a></button>
      <button><a href="/admin/dashboard?listClientsForm=true">Listar Clientes</a></button>
      <% } %>
  </div>
  <div class="sector-options">
    <% if (sectorOptions==='true' ) { %>
      <h2>Gestion de Sectores</h2>
      <button><a href="/admin/dashboard?createSectorForm=true">Crear Sector</a></button>
      <button><a href="/admin/dashboard?listSectorsForm=true">Listar Sector</a></button>
      <% } %>
  </div>
  <div class="interrupcion-options">
    <% if (interruptionOptions==='true' ) { %>
      <h2>Gestion de Interrupciones</h2>
      <button><a href="/admin/dashboard?createInterruptionForm=true">Crear Interrupcion</a></button>
      <button><a href="/admin/dashboard?listInterruptionsForm=true">Listar Interrupcion</a></button>
      <% } %>
  </div>

  <!-- Formulario de Crear Cliente -->
  <div class="create-client-form">
    <% if (createClientForm==='true' ) { %>
      <h2>Create New Client</h2>
      <form action="/admin" method="POST">
        <label for="idCard">Cédula:</label>
        <input type="text" id="idCard" name="idCard" required /><br />

        <label for="coordinates">Coordinates:</label>
        <input type="text" id="coordinates" name="coordinates" placeholder="Latitud, Longitud" required /><br />

        <label for="firstName">Nombres:</label>
        <input type="text" id="names" name="names" required /><br />

        <label for="lastName">Apellidos:</label>
        <input type="text" id="surnames" name="surnames" required /><br />

        <label for="email">Correo electrónico:</label>
        <input type="email" id="mail" name="mail" required /><br />

        <label for="password">Contraseña:</label>
        <input type="text" id="password" name="password" required /><br />

        <label for="role">Role:</label>
        <select id="role" name="role">
          <option value="CLIENT" selected>CLIENT</option>
          <option value="ADMIN">ADMIN</option>
        </select><br />

        <button type="submit" name="action" value="createClient">Create Client</button>
      </form>
      <% } %>
  </div>

  <!-- Formulario para Listar Clientes -->
  <div class="list-clients-form">
    <% if (listClientsForm==='true' ) { %>
      <h2>List of Clients</h2>
      <table border="1">
        <thead>
          <tr>
            <th>Actions</th>
            <th>ID</th>
            <th>Name</th>
            <th>Mail</th>
            <th>Role</th>
            <th>Usernmame</th>
            <th>Password</th>
          </tr>
        </thead>
        <tbody>
          <% clients.forEach(function(client) { %>
            <tr>
              <td>
                <button>
                  <a href="/admin/edit-user/<%= client.idCard %>"
                    style="text-decoration: none; color: rgb(0, 91, 209);">Edit</a>
                </button>
                <button><a href="/admin/delete-user/<%= client.idCard %>"
                    style="text-decoration: none; color: rgb(231, 10, 10);">Delete</a></button>
              </td>
              <td>
                <%= client.idCard %>
              </td>
              <td>
                <%= client.names %>
                  <%= client.surnames %>
              </td>
              <td>
                <%= client.mail %>
              </td>
              <td>
                <%= client.role %>
              </td>
              <td>
                <%= client.username %>
              </td>
              <td>
                <%= client.password %>
              </td>
            </tr>
            <% }); %>
        </tbody>
      </table>
      <% } %>
  </div>

  <!-- Formulario de Crear Sector -->
  <div class="create-sector-form">
    <% if (createSectorForm==='true' ) { %>
      <h2>Crear Nuevo Sector</h2>
      <form action="/admin/create-sector" method="POST">

        <label for="name">Nombre:</label>
        <input type="text" id="name" name="name" required /><br />

        <label for="polygon">Polígono (Formato: (lat1, lon1), (lat2, lon2), ...):</label>
        <input type="text" id="polygon" name="polygon" required /><br />

        <button type="submit" name="action" value="createSector">Crear Sector</button>
      </form>
      <% } %>
  </div>

  <!-- Formulario para Listar Sectores -->
  <div class="list-sectors-form">
    <% if (listSectorsForm==='true' ) { %>
      <h2>Lista de Sectores</h2>
      <table border="1">
        <thead>
          <tr>
            <th>Actions</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Polígono</th>
          </tr>
        </thead>
        <tbody>
          <% sectors.forEach(function(sector) { %>
            <tr>
              <td>
                <button>
                  <a href="/admin/edit-sector/<%= sector.id %>"
                    style="text-decoration: none; color: rgb(0, 91, 209);">Edit</a>
                </button>
                <button><a href="/admin/delete-sector/<%= sector.id %>"
                    style="text-decoration: none; color: rgb(231, 10, 10);">Delete</a></button>
              </td>
              <td>
                <%= sector.id %>
              </td>
              <td>
                <%= sector.name %>
              </td>
              <td>
                <%= sector.polygon %>
              </td>
            </tr>
            <% }); %>
        </tbody>
      </table>
      <% } %>
  </div>

  <!-- Formulario de Crear Interrupción -->
  <div class="create-interruption-form">
    <% if (createInterruptionForm==='true' ) { %>
      <h2>Crear Nueva Interrupción</h2>
      <form action="/admin/create-interruption" method="POST">

        <label for="startTime">Hora de Inicio:</label>
        <input type="time" id="startTime" name="startTime" required /><br />

        <label for="endTime">Hora de Fin:</label>
        <input type="time" id="endTime" name="endTime" required /><br />

        <label for="sectorId">ID del Sector:</label>
        <input type="number" id="sectorId" name="sectorId" required /><br />

        <button type="submit" name="action" value="createInterruption">Crear Interrupción</button>
      </form>
      <% } %>
  </div>

  <!-- Formulario para Listar Interrupciones -->
  <div class="list-interruptions-form">
    <% if (listInterruptionsForm==='true' ) { %>
      <h2>Lista de Interrupciones</h2>
      <table border="1">
        <thead>
          <tr>
            <th>Actions</th>
            <th>ID</th>
            <th>Hora de Inicio</th>
            <th>Hora de Fin</th>
            <th>ID del Sector</th>
          </tr>
        </thead>
        <tbody>
          <% interruptions.forEach(function(interruption) { %>
            <tr>
              <td>
                <button>
                  <a href="/admin/edit-interruption/<%= interruption.id %>"
                    style="text-decoration: none; color: rgb(0, 91, 209);">Edit</a>
                </button>
                <button><a href="/admin/delete-interruption/<%= interruption.id %>"
                    style="text-decoration: none; color: rgb(231, 10, 10);">Delete</a></button>
              </td>
              <td>
                <%= interruption.id %>
              </td>
              <td>
                <%= interruption.startTime %>
              </td>
              <td>
                <%= interruption.endTime %>
              </td>
              <td>
                <%= interruption.sectorId %>
              </td>
            </tr>
            <% }); %>
        </tbody>
      </table>
      <% } %>
  </div>
</body>

</html>